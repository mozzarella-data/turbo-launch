<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tideline Partners - Opportunity Zone Calculator</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Range Slider Styling */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
        }
        input[type=range]:focus {
            outline: none; 
        }
    </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900">

    <!-- Navigation -->
    <nav class="bg-slate-900 text-white sticky top-0 z-40 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-amber-500 rounded-sm flex items-center justify-center">
                        <span class="font-bold text-slate-900 text-xl">T</span>
                    </div>
                    <span class="font-bold text-xl tracking-wide">TIDELINE <span class="font-light text-slate-400">PARTNERS</span></span>
                </div>
                
                <!-- Desktop Nav -->
                <div class="hidden md:flex space-x-8 text-sm font-medium text-slate-300">
                    <a href="#" class="hover:text-amber-500 transition">Projects</a>
                    <a href="#" class="hover:text-amber-500 transition">Opportunity Zones</a>
                    <a href="#" class="hover:text-amber-500 transition">Investors</a>
                    <a href="#" class="hover:text-amber-500 transition">Contact</a>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="menu-btn" class="text-slate-300 hover:text-white focus:outline-none">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Nav -->
        <div id="mobile-menu" class="hidden md:hidden bg-slate-800 p-4 space-y-4">
            <a href="#" class="block text-slate-300 hover:text-white">Projects</a>
            <a href="#" class="block text-slate-300 hover:text-white">Opportunity Zones</a>
            <a href="#" class="block text-slate-300 hover:text-white">Investors</a>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 mb-4">
                Vista Opportunity Zone Calculator
            </h1>
            <p class="text-lg text-slate-600 max-w-2xl mx-auto">
                Calculate the potential tax-equivalent yield of investing your capital gains into the Pepper Tree / Vista Downtown redevelopment project.
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- LEFT COLUMN: Controls (4/12) -->
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 sticky top-24">
                    <h2 class="text-xl font-bold mb-6 flex items-center">
                        <i data-lucide="dollar-sign" class="w-5 h-5 mr-2 text-amber-600"></i>
                        Investment Inputs
                    </h2>

                    <!-- Capital Gain Input -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            Capital Gain Amount
                        </label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-slate-400">$</span>
                            <input type="number" id="input-gain" value="1000000" class="w-full pl-8 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition">
                        </div>
                        <input type="range" id="range-gain" min="100000" max="10000000" step="50000" value="1000000" class="w-full mt-3 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-amber-600">
                    </div>

                    <!-- Tax Rates -->
                    <div class="mb-6 grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
                                Federal Rate (%)
                            </label>
                            <input type="number" id="input-fed" value="23.8" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-amber-500 focus:border-amber-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
                                State Rate (%)
                            </label>
                            <input type="number" id="input-state" value="13.3" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-amber-500 focus:border-amber-500 outline-none">
                        </div>
                    </div>

                    <!-- Return Rate -->
                    <div class="mb-8">
                        <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center">
                            Target Annual Return (IRR)
                            <!-- Tooltip -->
                            <div class="group relative inline-block ml-2 cursor-help">
                                <i data-lucide="info" class="w-3.5 h-3.5 text-slate-400 hover:text-slate-600"></i>
                                <div class="invisible group-hover:visible absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-slate-800 text-white text-xs rounded shadow-lg z-50 text-center opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                    Estimated annual compound growth rate. Real estate development typically targets 15%+, but we default to 10% for conservative modeling.
                                    <div class="absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-slate-800"></div>
                                </div>
                            </div>
                        </label>
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-slate-500 text-sm">5%</span>
                            <span id="display-return" class="font-bold text-amber-600">10%</span>
                            <span class="text-slate-500 text-sm">20%</span>
                        </div>
                        <input type="range" id="range-return" min="5" max="20" step="0.5" value="10.0" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-amber-600">
                    </div>

                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                        <h4 class="text-blue-900 font-bold text-sm mb-2">Assumptions</h4>
                        <ul class="text-xs text-blue-800 space-y-1 list-disc pl-4">
                            <li>Investment Date: Late 2025/2026</li>
                            <li>Deferred Tax Paid: April 2027</li>
                            <li>Asset Hold Period: 10 Years</li>
                            <li>Exit Year: 2035/2036</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: Results (8/12) -->
            <div class="lg:col-span-8 space-y-6">
                
                <!-- Summary Metrics -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5 border-l-4 border-l-slate-400 bg-slate-50">
                        <div class="text-slate-500 text-sm font-medium mb-1">Initial Tax Deferral</div>
                        <div id="val-deferred" class="text-2xl font-bold text-slate-700">$0</div>
                        <div class="text-xs text-slate-400 mt-1">Due April 2027</div>
                    </div>
                    
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5 border-l-4 border-l-amber-500 bg-amber-50">
                        <div class="text-amber-800 text-sm font-medium mb-1">Additional Profit (After-Tax)</div>
                        <div id="val-saved" class="text-3xl font-bold text-amber-600">$0</div>
                        <div class="text-xs text-amber-700 mt-1">vs. Standard Investment</div>
                    </div>

                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5 border-l-4 border-l-emerald-500 bg-emerald-50">
                        <div class="text-emerald-800 text-sm font-medium mb-1">Total 10-Year Value</div>
                        <div id="val-oz-final" class="text-2xl font-bold text-emerald-700">$0</div>
                        <div class="text-xs text-emerald-800 mt-1">100% Tax-Free Exit</div>
                    </div>
                </div>

                <!-- Visualizer Chart -->
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 md:p-8">
                    <h3 class="text-lg font-bold text-slate-800 mb-6">10-Year After-Tax Wealth Comparison</h3>
                    
                    <div class="space-y-6">
                        <!-- Standard Bar -->
                        <div>
                            <div class="flex justify-between text-sm mb-2">
                                <span class="font-semibold text-slate-600">Standard Taxable Investment</span>
                                <span id="val-std-final" class="font-bold text-slate-900">$0</span>
                            </div>
                            <div class="w-full h-12 bg-slate-100 rounded-r-lg relative overflow-hidden flex items-center">
                                <div id="bar-std" class="h-full bg-slate-400 rounded-r-lg transition-all duration-1000 ease-out" style="width: 50%"></div>
                                <span class="absolute left-4 text-white font-medium drop-shadow-md z-10 text-sm whitespace-nowrap">
                                    Tax Drag Reduces Growth
                                </span>
                            </div>
                        </div>

                        <!-- Tideline OZ Bar -->
                        <div>
                            <div class="flex justify-between text-sm mb-2">
                                <span class="font-bold text-amber-700 flex items-center">
                                    <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>
                                    Tideline OZ Fund (Pepper Tree)
                                </span>
                                <span id="val-oz-final-sm" class="font-bold text-amber-600 text-lg">$0</span>
                            </div>
                            <div class="w-full h-12 bg-amber-100 rounded-r-lg relative overflow-hidden flex items-center ring-2 ring-amber-500 ring-offset-2">
                                <div id="bar-oz" class="h-full bg-gradient-to-r from-amber-500 to-amber-600 rounded-r-lg transition-all duration-1000 ease-out" style="width: 100%"></div>
                                <span class="absolute left-4 text-white font-bold drop-shadow-md z-10 text-sm whitespace-nowrap">
                                    Full Compounding + Tax-Free Exit
                                </span>
                                <div class="absolute right-4 text-white/90 text-xs font-semibold bg-white/20 px-2 py-1 rounded hidden sm:block">
                                    WINNER
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 p-4 bg-slate-50 rounded-lg text-sm text-slate-600 border border-slate-200">
                        <p class="leading-relaxed">
                            <strong>The "Home Run" Benefit:</strong> By investing in the Tideline Opportunity Zone Fund, your initial <span id="text-gain" class="font-medium">$1,000,000</span> grows without tax drag for 10 years. Even after paying the deferred tax in 2027, the <strong id="text-diff" class="text-amber-700">$0</strong> advantage comes from the fact that all appreciation on the project is permanently tax-free.
                        </p>
                    </div>
                </div>

                <!-- Project Context -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-0 overflow-hidden flex flex-col">
                        <div class="bg-slate-900 p-6 text-white h-full flex flex-col justify-between">
                            <div>
                                <h3 class="font-bold text-lg mb-2 flex items-center">
                                    <i data-lucide="building" class="w-5 h-5 mr-2 text-amber-400"></i>
                                    The Project: Pepper Tree
                                </h3>
                                <p class="text-slate-300 text-sm mb-4">
                                    An 89-unit mixed-use development in the heart of Downtown Vista, CA. This project addresses the critical housing shortage in North County San Diego.
                                </p>
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm">
                                        <span class="w-2 h-2 bg-amber-500 rounded-full mr-2"></span>
                                        Qualified Opportunity Zone
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <span class="w-2 h-2 bg-amber-500 rounded-full mr-2"></span>
                                        Fully Entitled
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <span class="w-2 h-2 bg-amber-500 rounded-full mr-2"></span>
                                        High-Walkability Score
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6 pt-6 border-t border-slate-700">
                                <p class="text-xs text-slate-400 uppercase tracking-wider mb-1">Location</p>
                                <p class="font-semibold">Vista, California (San Diego County)</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-white to-amber-50 rounded-xl border border-slate-200 shadow-sm p-6 flex flex-col justify-center items-center text-center">
                        <h3 class="font-bold text-slate-900 text-lg mb-2">Ready to Defer Taxes?</h3>
                        <p class="text-slate-600 text-sm mb-6">
                            Get the full investor prospectus for the Vista Qualified Opportunity Fund I.
                        </p>
                        <button class="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center transition shadow-lg shadow-amber-600/20 group">
                            <i data-lucide="download" class="mr-2 w-5 h-5 group-hover:-translate-y-1 transition-transform"></i>
                            Request Investor Packet
                        </button>
                        <div class="mt-4 flex items-center justify-center space-x-4">
                           <button class="text-slate-400 hover:text-slate-600">
                             <i data-lucide="share-2" class="w-5 h-5"></i>
                           </button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <footer class="bg-slate-900 text-slate-400 py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-3 gap-8 text-sm">
            <div>
                <h4 class="text-white font-bold mb-4">Tideline Partners</h4>
                <p class="mb-4">Developing community-focused real estate in San Diego.</p>
                <p>Â© 2025 Tideline Partners.</p>
            </div>
            <div>
                <h4 class="text-white font-bold mb-4">Disclaimer</h4>
                <p class="text-xs leading-relaxed">
                    This calculator is for illustrative purposes only and does not constitute tax, legal, or investment advice. Actual returns may vary. The "Standard Investment" scenario assumes a taxable account with capital gains taxes paid on the final sale. The Opportunity Zone scenario assumes compliance with all QOF regulations, including the 10-year hold period. Please consult your CPA or RIA.
                </p>
            </div>
            <div>
                <h4 class="text-white font-bold mb-4">Contact</h4>
                <p>123 Main Street, Suite 200</p>
                <p>Vista, CA 92084</p>
                <p class="mt-2">invest@tidelinepartners.com</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Icon Initialization ---
        lucide.createIcons();

        // --- DOM Elements ---
        const els = {
            inputGain: document.getElementById('input-gain'),
            rangeGain: document.getElementById('range-gain'),
            inputFed: document.getElementById('input-fed'),
            inputState: document.getElementById('input-state'),
            rangeReturn: document.getElementById('range-return'),
            displayReturn: document.getElementById('display-return'),
            
            valDeferred: document.getElementById('val-deferred'),
            valSaved: document.getElementById('val-saved'),
            valOzFinal: document.getElementById('val-oz-final'),
            valOzFinalSm: document.getElementById('val-oz-final-sm'),
            valStdFinal: document.getElementById('val-std-final'),
            
            barStd: document.getElementById('bar-std'),
            textGain: document.getElementById('text-gain'),
            textDiff: document.getElementById('text-diff'),

            menuBtn: document.getElementById('menu-btn'),
            mobileMenu: document.getElementById('mobile-menu')
        };

        // --- Formatting ---
        const fmt = new Intl.NumberFormat('en-US', { 
            style: 'currency', 
            currency: 'USD', 
            maximumFractionDigits: 0 
        });

        // --- Calculation Logic ---
        function calculate() {
            // Get Values
            const capitalGain = parseFloat(els.inputGain.value) || 0;
            const fedRate = parseFloat(els.inputFed.value) || 0;
            const stateRate = parseFloat(els.inputState.value) || 0;
            const annualReturn = parseFloat(els.rangeReturn.value) || 0;

            // Update UI mirrors
            els.rangeGain.value = capitalGain;
            els.inputGain.value = capitalGain; // Ensure sync if range moved
            els.displayReturn.innerText = annualReturn + '%';
            els.textGain.innerText = fmt.format(capitalGain);

            // Constants
            const totalTaxRate = (fedRate + stateRate) / 100;
            const years = 10;

            // --- Scenario A: Standard Taxable Investment ---
            const taxNow = capitalGain * totalTaxRate;
            const initialInvStandard = capitalGain - taxNow;
            
            // FV = PV * (1 + r)^n
            const futureValStdPreTax = initialInvStandard * Math.pow(1 + annualReturn / 100, years);
            const gainStd = futureValStdPreTax - initialInvStandard;
            const taxOnGainStd = gainStd * totalTaxRate;
            const standardFinal = futureValStdPreTax - taxOnGainStd;

            // --- Scenario B: Opportunity Zone ---
            const initialInvOZ = capitalGain; // Defer tax
            const deferredTaxLiability = capitalGain * totalTaxRate; // Paid in 2027
            
            // Growth is tax free on the backend
            const futureValOZ = initialInvOZ * Math.pow(1 + annualReturn / 100, years);
            const ozFinal = futureValOZ - deferredTaxLiability;

            // --- Update Results ---
            els.valDeferred.innerText = fmt.format(deferredTaxLiability);
            els.valSaved.innerText = fmt.format(ozFinal - standardFinal);
            
            els.valOzFinal.innerText = fmt.format(ozFinal);
            els.valOzFinalSm.innerText = fmt.format(ozFinal);
            els.valStdFinal.innerText = fmt.format(standardFinal);
            
            els.textDiff.innerText = fmt.format(ozFinal - standardFinal);

            // --- Update Charts ---
            // Calculate percentage width for Standard relative to OZ
            let widthPct = 0;
            if (ozFinal > 0) {
                widthPct = (standardFinal / ozFinal) * 100;
            }
            // Clamp
            widthPct = Math.max(0, Math.min(100, widthPct));
            
            els.barStd.style.width = widthPct + '%';
        }

        // --- Event Listeners ---
        const inputs = [els.inputGain, els.rangeGain, els.inputFed, els.inputState, els.rangeReturn];
        
        inputs.forEach(input => {
            input.addEventListener('input', (e) => {
                // Sync Range/Input doubles
                if (e.target === els.rangeGain) els.inputGain.value = e.target.value;
                if (e.target === els.inputGain) els.rangeGain.value = e.target.value;
                calculate();
            });
        });

        // Mobile Menu Toggle
        els.menuBtn.addEventListener('click', () => {
            els.mobileMenu.classList.toggle('hidden');
        });

        // Initial Calc
        calculate();

    </script>
</body>
</html>
